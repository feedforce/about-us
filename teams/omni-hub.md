## 基本情報

https://omni-hub.jp/

## プロダクト

### プロダクトの説明

Omni Hubは2021年4月にリリースされた、ECサイトと実店舗の会員を統合するBtoBtoCのID連携サービスです。
Shopifyと複数の実店舗POSサービス（スマレジ、Square等）の顧客情報を連携し、カスタマーに一貫したブランド体験を提供します。サービス開始から4年以上が経過し、安定した運用実績と継続的な機能拡張により、小売業界のオムニチャネル戦略を支える成熟したプラットフォームとして成長しています。複数のPOSシステムに対応する拡張性の高いアーキテクチャにより、多様な小売業態のニーズに応えることができます。

主な機能として、

* 店舗で提示出来る会員バーコード
* ECサイトと実店舗の売上情報の共通化
* オンライン・オフライン共通のポイントプログラム
* 他社アプリと連携した、オンライン・オフライン共通のポイントプログラム
* 店舗発行のレシートを使ったポイント後付
* Apple/Googleウォレットを使った会員証
* 実店舗の在庫をECサイトで表示
* 実店舗への訪問をチェックインイベントとして特典付与
* 複数POSシステム対応による拡張性の高い店舗統合
* 外部会員システムとの連携による既存顧客基盤の活用
* 高度なポイント管理とロイヤルティプログラム
* モダンなShopify Customer Account UI Extensionsによる顧客体験向上
* Square Loyaltyプログラムとの統合による包括的なポイント管理

を提供しています。

従来これらの施策は、大手POSベンダーとの密な協業を含むブランドごとの個別開発が必要であり、大きなコストの掛かるものでした。
Omni Hubは、そういった既存の顧客体験を低廉にカバーしつつ、消費体験をブランドが再デザインできるような機能を提供します。複数のPOSシステムに対応することで、ブランドの既存インフラを活かしながら段階的にオムニチャネル戦略を実現できる柔軟性を持っています。

## 利用技術・開発環境

### 自動化していること

- 開発環境構築（Docker Compose による完全なローカル環境）
- 運用環境構築（Terraform による Infrastructure as Code）
- 静的検査（Rust Clippy、TypeScript ESLint、フォーマット検査）
- テスト（単体テスト、統合テスト、カバレッジ測定、スナップショットテスト）
- デプロイメント（GitHub Actions による自動CI/CD、Blue/Green Deployment）
- GraphQLスキーマ互換性検証と自動生成
- 依存関係の脆弱性検査と自動更新
- API仕様管理（OpenAPI、Bruno APIクライアント）
- 包括的な監視・アラート（Slack統合、運用メトリクス）

### 継続的に実践していること

- スクラム開発手法（2週間スプリント）
- Blue/Green Deployment による安全なリリース
- Architecture Decision Record（ADR）による設計決定の透明化
- 機能仕様書の作成/更新と継続的なドキュメント管理
- モノレポによる統合的なコード管理
- 障害レポートの作成/追跡と迅速な問題解決
- 事業の数値進捗をチーム全員で共有/追跡
- 透明性のある意思決定プロセス
- コードレビューとペアプログラミング
- 継続的リファクタリングによる技術的負債の解消
- テスト駆動開発（TDD）の実践
- 非同期コミュニケーションとフルリモート開発

### 利用している主要技術（本番環境で利用しているもの）

`AWS`, `EC2`, `ECS`, `SQS`, `Aurora`, `DynamoDB`, `Redis`, `EventBridge`, `CloudWatch`, `Elastic Beanstalk`, `Terraform`, `Rust`, `Actix Web`, `Diesel`, `TypeScript`, `React`, `Polaris`, `GraphQL`, `Square API`, `Shopify UI Extensions`

### それ以外の開発環境や管理画面等で利用しているもの

`GitHub Actions`, `Docker`, `Sentry`, `Redash`, `PostgreSQL`, `MinIO`, `ElasticMQ`, `Storybook`, `cargo-llvm-cov`, `diesel_cli`, `esbuild`, `Bruno API Client`

### タスク管理・チャットツール等

`GitHub`, `Slack`, `Zoom`, `esa`, `Figma`, `Google Spreadsheet`

## チーム全体での開発の進め方

開発者3名、ビジネス3名、マーケティング1名のチームで、スクラムで進めています。

1イテレーション = 2週間を基準に、

1. そのイテレーションで取り組むタスクを全員で詳細化/分解していく `スプリントプランニング`
1. 次のイテレーションで取り組むタスクや顧客商談/開発の過程で新しく生まれたアイデアを優先度付け/詳細化する `バックログリファインメント`
1. そのイテレーションの成果をチームで共有する `スプリントレビュー`
1. そのイテレーションの取り組みを振り返る `スプリントレトロスペクティブ`

4つのイベントに全員で取り組んでいます。

## 技術面でのアピール・課題・考え方

### 全体

- ドメイン駆動開発（DDD）をベースにした明確なレイヤードアーキテクチャでコードを組織化しています
- 各自の得意領域を中心にしつつ、フロントエンド・バックエンド・インフラなどに担当領域を分けず、サービスそのものに対してコミットメントするように心がけています
- モノレポ構成で、フロントエンド・バックエンド・インフラのコードを統合管理しています
- 包括的な自動CI/CDパイプライン（テスト、リント、セキュリティ検査、デプロイ）が実施されています
- リファクタリング/コードベース改善の文化が根付いており、技術的負債の継続的な解消を行っています
- フルリモートで開発を行い、非同期コミュニケーションを重視しています
- 監視・通知・アラートは Slack に集約し、迅速な問題対応を実現しています
- バックエンドはRust/Actix Webによる高性能で安全なシステムを構築しています
- フロントエンドはTypeScript/React/Shopify Polarisによる一貫性のあるUIを提供しています
- インフラはTerraformによるコード化されたインフラ管理を実践しています
- 複数POS対応のための抽象化レイヤーにより、拡張性の高いアーキテクチャを実現しています
- ジョブベースの非同期処理システムにより、複雑な外部システム連携を安定して実行しています
- Architecture Decision Record（ADR）による設計判断の文書化と共有を徹底しています

### 課題

- 企業顧客、生活者が望む機能を素早く提供していくために、人員が足りない

## 開発チームからのメッセージ

実店舗は、単なる販売の場だけでなく顧客に対するメディアとして再定義されつつあります。
Omni Hubは、この変化する小売業界において、ブランドと顧客をつなぐ重要な基盤として成長してきました。

4年以上の運用を通じて蓄積された知見と、継続的な技術革新により、より多くのブランドのオムニチャネル戦略を支援できるプラットフォームへと進化しています。複数のPOSシステム対応（スマレジ、Square等）や外部システム連携、モダンなShopify UI Extensionsなど、拡張性の高いアーキテクチャにより、多様な小売業態のニーズに応えることができます。

ドメイン駆動開発とジョブベースの非同期処理システムにより、複雑な外部システム連携を安定して実行し、包括的な自動化とCI/CDパイプラインにより、迅速で安全な機能提供を実現しています。

新しい小売体験・購買体験を一緒に創造し、小売業界のデジタル変革を推進していきませんか。

ぜひ力を貸して下さい！
